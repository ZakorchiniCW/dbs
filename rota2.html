<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplicativo de Simulação de Scanner</title>
    <!-- Carrega Tailwind CSS para estilização moderna e responsiva -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Define a fonte Inter para o aplicativo */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fb;
        }
        /* Estilização para o indicador de carregamento (Spinner) */
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid #ffffff;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#4f46e5', /* Indigo-600 */
                        'primary-dark': '#4338ca', /* Indigo-700 */
                    }
                }
            }
        }
    </script>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <!-- Container Principal do Aplicativo -->
    <div class="w-full max-w-lg bg-white p-8 rounded-xl shadow-2xl transition-all duration-300">
        <h1 class="text-3xl font-bold text-gray-900 mb-6 text-center">Simulador de Escaneamento</h1>

        <!-- Painel de Status -->
        <div class="mb-8 p-4 bg-primary-dark rounded-lg flex items-center justify-between shadow-inner">
            <span class="text-white font-medium">Status Atual:</span>
            <span id="statusMessage" class="text-lg font-bold text-yellow-300 transition-colors duration-300">Pronto para Escanear</span>
        </div>

        <!-- Botão de Iniciar Escaneamento -->
        <button id="scanButton" onclick="openConfirmationModal()"
                class="w-full flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-lg shadow-lg text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-4 focus:ring-primary focus:ring-opacity-50 disabled:opacity-50 transition-all duration-200"
                aria-label="Clique para iniciar o processo de escaneamento">
            <span id="buttonText">Iniciar Escaneamento</span>
            <div id="loadingSpinner" class="spinner ml-3 hidden"></div>
        </button>

        <p class="text-sm text-gray-500 mt-4 text-center">Clique no botão para iniciar a simulação do scanner.</p>
    </div>

    <!-- Modal de Confirmação Personalizado (Substitui alert/confirm) -->
    <div id="confirmationModal" class="fixed inset-0 bg-gray-900 bg-opacity-75 z-50 hidden items-center justify-center transition-opacity duration-300" aria-modal="true" role="dialog">
        <div class="bg-white rounded-xl p-6 w-11/12 max-w-sm shadow-2xl transform scale-95 transition-transform duration-300">
            <h2 class="text-xl font-bold text-gray-900 mb-4">Confirmação de Escaneamento</h2>
            <p class="text-gray-700 mb-6">Deseja realmente iniciar o processo de escaneamento agora?</p>

            <div class="flex justify-end space-x-3">
                <!-- Botão Cancelar -->
                <button onclick="closeConfirmationModal()"
                        class="px-4 py-2 text-sm font-medium text-gray-600 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors duration-150 focus:outline-none focus:ring-2 focus:ring-gray-500">
                    Cancelar
                </button>
                <!-- Botão de Ação Principal (Iniciar) -->
                <button onclick="startScanning()"
                        class="px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 transition-colors duration-150 focus:outline-none focus:ring-2 focus:ring-green-500">
                    Sim, Iniciar
                </button>
            </div>
        </div>
    </div>

    <script>
        const scanButton = document.getElementById('scanButton');
        const buttonText = document.getElementById('buttonText');
        const loadingSpinner = document.getElementById('loadingSpinner');
        const statusMessage = document.getElementById('statusMessage');
        const confirmationModal = document.getElementById('confirmationModal');

        // Estado da aplicação
        let isScanning = false;

        /**
         * Abre o modal de confirmação.
         * Esta é a primeira etapa após o clique no botão.
         */
        function openConfirmationModal() {
            if (isScanning) return;
            confirmationModal.classList.remove('hidden');
            confirmationModal.classList.add('flex');
        }

        /**
         * Fecha o modal de confirmação.
         */
        function closeConfirmationModal() {
            confirmationModal.classList.add('hidden');
            confirmationModal.classList.remove('flex');
        }

        /**
         * Inicia o processo de escaneamento após a confirmação.
         * Esta função é chamada a partir do botão 'Sim, Iniciar' no modal.
         */
        function startScanning() {
            closeConfirmationModal(); // Fecha o modal imediatamente
            
            if (isScanning) return;

            isScanning = true;
            scanButton.disabled = true;

            // Atualiza o UI para o estado de escaneamento
            statusMessage.textContent = 'Escaneando...';
            statusMessage.classList.remove('text-yellow-300', 'text-green-400');
            statusMessage.classList.add('text-indigo-300');
            
            buttonText.textContent = 'Processando...';
            loadingSpinner.classList.remove('hidden');

            // Simula o tempo de escaneamento (3 segundos)
            setTimeout(() => {
                isScanning = false;
                scanButton.disabled = false;

                // Atualiza o UI para o estado de concluído
                statusMessage.textContent = 'Escaneamento Concluído!';
                statusMessage.classList.remove('text-indigo-300', 'text-yellow-300');
                statusMessage.classList.add('text-green-400');

                buttonText.textContent = 'Iniciar Novo Escaneamento';
                loadingSpinner.classList.add('hidden');

                // Após a conclusão, o próximo clique no botão abrirá o modal novamente
                // MAS não teremos confirmações repetidas durante o processo.

            }, 3000); // 3 segundos de simulação
        }

        // Garante que o estado inicial do botão esteja correto
        document.addEventListener('DOMContentLoaded', () => {
            statusMessage.textContent = 'Pronto para Escanear';
            statusMessage.classList.add('text-yellow-300');
        });

    </script>
</body>
</html>
